{"ast":null,"code":"import _classCallCheck from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/src/App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport User from './components/User';\nimport Hobby from './components/Hobby';\nimport Restaurant from './components/Restaurants';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      restaurants: [],\n      userInput: '',\n      displayNumber: '5',\n      currentPage: '0',\n      query: '',\n      filteredrestaurants: [],\n      cRestaurants: null,\n      elementCount: null,\n      modifMod: false,\n      insertMod: false,\n      colMod: false,\n      showMessage: false,\n      message: '',\n      notActiveClass: 'col-lg-12',\n      activeClass: 'col-lg-8',\n      selectedForModification: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"addHobby\",\n    value: function addHobby() {\n      var oldHobbies = this.state.hobbies;\n      this.setState({\n        hobbies: oldHobbies.concat(this.input.value)\n      });\n      this.input.value = \"\";\n    }\n  }, {\n    key: \"removeHobby\",\n    value: function removeHobby(hobby) {\n      /*\n      let oldHobbies = this.state.hobbies;\n      let pos = this.state.hobbies.indexOf(hobby);\n      oldHobbies.splice(pos, 1);\n      */\n      var oldHobbies = this.state.hobbies.filter(function (elem, index) {\n        return elem !== hobby ? elem : null;\n      });\n      this.setState({\n        hobbies: oldHobbies\n      });\n    }\n  }, {\n    key: \"getDataFromServer\",\n    value: function getDataFromServer(url) {\n      var _this2 = this;\n\n      console.log(\"--- GETTING DATA ---\");\n      fetch(url).then(function (response) {\n        response.json().then(function (res) {\n          console.log(res);\n\n          _this2.setState({\n            restaurants: res.data\n          });\n\n          _this2.setState({\n            filteredrestaurants: _this2.state.restaurants\n          }); // this.state.restaurants = res.data;\n          //this.state.filteredrestaurants = this.state.restaurants;\n\n\n          console.log(_this2.state.restaurants);\n        });\n      }).catch(function (err) {\n        console.log(\"erreur dans le get : \" + err);\n      });\n    }\n  }, {\n    key: \"removeRestaurant\",\n    value: function removeRestaurant(id, index) {\n      var _this3 = this;\n\n      var url = \"http://localhost:8080/api/restaurants/\" + id;\n      console.log(id);\n      console.log(url);\n      fetch(url, {\n        method: \"DELETE\"\n      }).then(function (responseJSON) {\n        console.log(\"element supprimé\");\n\n        _this3.state.restaurants.splice(index, 1);\n\n        _this3.state.filteredrestaurants.splice(index, 1);\n\n        _this3.state.message = 'Ce restaurant a été supprimé';\n        _this3.state.showMessage = true;\n        setTimeout(function () {\n          _this3.state.showMessage = false;\n        }, 3000);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"countRestaurants\",\n    value: function countRestaurants(gurl) {\n      var _this4 = this;\n\n      var url = gurl;\n      fetch(url).then(function (response) {\n        response.json().then(function (res) {\n          _this4.elementCount = res.data;\n          _this4.cRestaurants = Math.ceil(_this4.elementCount / _this4.displayNumber);\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      console.log(\"Component will mount\"); // on va chercher des donnees sur le Web avec fetch, comme\n      // on a fait avec VueJS\n\n      this.countRestaurants('http://localhost:8080/api/restaurants/count');\n      this.getDataFromServer('http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber);\n    }\n  }, {\n    key: \"showInsertForm\",\n    value: function showInsertForm() {\n      var _this5 = this;\n\n      this.state.colMod = true;\n      this.state.modifMod = false;\n      setTimeout(function () {\n        _this5.state.insertMod = true;\n      }, 300);\n    }\n  }, {\n    key: \"navigate\",\n    value: function navigate(element) {\n      var cnumber = parseInt(element.target.innerHTML) - 1;\n      this.state.currentPage = cnumber;\n      var url = 'http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber;\n\n      if (this.state.query.length > 0) {\n        url = 'http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber + '&name=' + this.state.query;\n      }\n\n      this.getDataFromServer(url);\n\n      if (element.target.id == 'thirdButton' || element.target.id == 'firstButton') {\n        if (this.state.currentPage == 0 || this.state.currentPage == Math.ceil(this.state.elementCount / this.state.displayNumber)) {\n          console.log('exit');\n          return;\n        }\n\n        console.log('changing');\n        document.querySelector('#firstButton').innerHTML = cnumber;\n        document.querySelector('#secondButton').innerHTML = cnumber + 1;\n        document.querySelector('#thirdButton').innerHTML = cnumber + 2;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      console.log(\"render\"); // let list = \n      // let listAvecComponent = \n      // \t\tthis.state.hobbies.map((el, index) => {\n      // \t\treturn <Hobby \n      // \t\t\t\t\t\t name={el}\n      // \t\t\t\t\t\t key={index} \n      //              removeHobby={this.removeHobby.bind(this)} \n      // \t\t\t\t\t\t />\n      // \t}\n\n      var options = [{\n        value: 5,\n        label: \"5\"\n      }, {\n        value: 10,\n        label: \"10\"\n      }, {\n        value: 15,\n        label: \"15\"\n      }];\n      return React.createElement(\"body\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          position: \"relative\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Table des restaurants\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark mb-3\",\n        id: \"createButton\",\n        onClick: function onClick() {\n          return _this6.showInsertForm();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: \"15px\",\n          right: \"15px\",\n          left: \"15px\",\n          transition: \"0.2s\"\n        },\n        id: \"succesAlert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        className: \"alert-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Op\\xE9ration r\\xE9ussie\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, this.state.message)), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"tableArea\",\n        className: this.state.colMod ? this.state.activeClass : this.state.notActiveClass,\n        style: {\n          transition: \"0.2s\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"input-group-text\",\n        for: \"elementPageDropDown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Elements par page\")), React.createElement(\"select\", {\n        model: this.state.displayNumber,\n        class: \"custom-select\",\n        id: \"elementPageDropDown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"5\"), React.createElement(\"option\", {\n        value: \"10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"10\"), React.createElement(\"option\", {\n        value: \"15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"15\"))), React.createElement(\"div\", {\n        className: \"input-group mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"searchInput\",\n        className: \"form-control\",\n        placeholder: \"Chercher par nom\",\n        model: this.state.query,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(\"table\", {\n        className: \"table table bordered\",\n        id: \"myTable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"thead-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Nom\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Cuisine\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, this.state.restaurants.map(function (el, index) {\n        return React.createElement(\"tr\", {\n          for: (el, index) in _this6.state.filteredrestaurants,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, el.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }, el.cuisine), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        }, \"Edit\"), React.createElement(\"button\", {\n          className: \"btn btn-dark\",\n          onClick: function onClick(e) {\n            return _this6.removeRestaurant(el._id, index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212\n          },\n          __self: this\n        }, \"Delete\")));\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"navigation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"firstButton\",\n        onClick: this.navigate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"secondButton\",\n        onClick: this.navigate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"thirdButton\",\n        onClick: this.navigate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"3\"), \"...................\", React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"lastPageButton\",\n        onClick: this.navigate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, this.state.cRestaurants)))))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Un composant User ci-dessous:\"), React.createElement(User, {\n        name: \"Michel Buffa\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }), React.createElement(User, {\n        name: \"Gabriel Mopolo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/src/App.js"],"names":["React","Component","User","Hobby","Restaurant","App","props","state","restaurants","userInput","displayNumber","currentPage","query","filteredrestaurants","cRestaurants","elementCount","modifMod","insertMod","colMod","showMessage","message","notActiveClass","activeClass","selectedForModification","oldHobbies","hobbies","setState","concat","input","value","hobby","filter","elem","index","url","console","log","fetch","then","response","json","res","data","catch","err","id","method","responseJSON","splice","setTimeout","gurl","Math","ceil","countRestaurants","getDataFromServer","element","cnumber","parseInt","target","innerHTML","length","document","querySelector","options","label","position","showInsertForm","top","right","left","transition","map","el","name","cuisine","e","removeRestaurant","_id","navigate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport User from './components/User';\nimport Hobby from './components/Hobby';\nimport Restaurant from './components/Restaurants';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      restaurants: [],\n      userInput: '',\n      displayNumber: '5',\n      currentPage: '0',\n      query: '',\n      filteredrestaurants: [],\n      cRestaurants: null,\n      elementCount: null,\n      modifMod: false,\n      insertMod: false,\n      colMod: false,\n      showMessage: false,\n      message: '',\n      notActiveClass: 'col-lg-12',\n      activeClass: 'col-lg-8',\n      selectedForModification: null,\n    }\n  }\n\n  addHobby() {\n    let oldHobbies = this.state.hobbies;\n    this.setState({\n      hobbies: oldHobbies.concat(this.input.value)\n    });\n\n    this.input.value = \"\";\n  }\n\n  removeHobby(hobby) {\n\t\t/*\n\t\tlet oldHobbies = this.state.hobbies;\n\t\tlet pos = this.state.hobbies.indexOf(hobby);\n\t\toldHobbies.splice(pos, 1);\n\t\t*/\n    const oldHobbies = this.state.hobbies.filter(\n      (elem, index) => {\n        return (elem !== hobby) ? elem : null;\n      }\n    );\n\n    this.setState({\n      hobbies: oldHobbies\n    });\n  }\n  getDataFromServer(url) {\n    console.log(\"--- GETTING DATA ---\");\n    fetch(url)\n      .then(response => {\n        response.json().then(res => {\n          console.log(res);\n          this.setState({ restaurants: res.data })\n          this.setState({ filteredrestaurants: this.state.restaurants })\n          // this.state.restaurants = res.data;\n          //this.state.filteredrestaurants = this.state.restaurants;\n\n          console.log(this.state.restaurants)\n\n        })\n      })\n      .catch(err => {\n        console.log(\"erreur dans le get : \" + err)\n      });\n  }\n\n  removeRestaurant(id, index) {\n    let url = \"http://localhost:8080/api/restaurants/\" + id;\n    console.log(id);\n    console.log(url);\n\n    fetch(url, {\n        method: \"DELETE\",\n    })\n        .then((responseJSON) => {\n          console.log(\"element supprimé\")\n            this.state.restaurants.splice(index, 1)\n            this.state.filteredrestaurants.splice(index, 1)\n            this.state.message = 'Ce restaurant a été supprimé'\n            this.state.showMessage = true\n            setTimeout(() => {\n                this.state.showMessage = false\n            }, 3000)\n        })\n        .catch(function (err) {\n            console.log(err);\n        });\n}\n\n  countRestaurants(gurl) {\n    let url = gurl;\n    fetch(url)\n      .then(response => {\n        response.json().then(res => {\n          this.elementCount = res.data;\n          this.cRestaurants = Math.ceil(this.elementCount / this.displayNumber);\n        })\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  componentWillMount() {\n    console.log(\"Component will mount\");\n    // on va chercher des donnees sur le Web avec fetch, comme\n    // on a fait avec VueJS\n    this.countRestaurants('http://localhost:8080/api/restaurants/count')\n    this.getDataFromServer('http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber);\n  }\n\n  showInsertForm() {\n    this.state.colMod = true;\n    this.state.modifMod = false;\n    setTimeout(() => {\n      this.state.insertMod = true;\n    }, 300)\n  }\n\n  navigate(element){\n    let cnumber = parseInt(element.target.innerHTML)-1;\n    this.state.currentPage = cnumber;\n    let url = 'http://localhost:8080/api/restaurants?page='+this.state.currentPage+'&pagesize='+this.state.displayNumber\n    if(this.state.query.length > 0){\n        url = 'http://localhost:8080/api/restaurants?page='+this.state.currentPage+'&pagesize='+this.state.displayNumber+'&name='+this.state.query\n    }\n    this.getDataFromServer(url)\n    if(element.target.id == 'thirdButton' || element.target.id == 'firstButton'){\n        if(this.state.currentPage == 0 || this.state.currentPage == Math.ceil(this.state.elementCount/this.state.displayNumber)){\n            console.log('exit')\n            return;\n        }\n        console.log('changing')\n        document.querySelector('#firstButton').innerHTML = cnumber;\n        document.querySelector('#secondButton').innerHTML = cnumber+1;\n        document.querySelector('#thirdButton').innerHTML = cnumber + 2;\n    }\n}\n\n  render() {\n    console.log(\"render\");\n    // let list = \n\n    // let listAvecComponent = \n    // \t\tthis.state.hobbies.map((el, index) => {\n    // \t\treturn <Hobby \n    // \t\t\t\t\t\t name={el}\n    // \t\t\t\t\t\t key={index} \n    //              removeHobby={this.removeHobby.bind(this)} \n    // \t\t\t\t\t\t />\n    // \t}\n\n    const options = [\n      { value: 5, label: \"5\" },\n      { value: 10, label: \"10\" },\n      { value: 15, label: \"15\" }\n    ]\n    return (\n      <body>\n        <div id=\"app\">\n          <div className=\"container\" style={{ position: \"relative\" }}>\n            <br></br>\n            <h2>Table des restaurants</h2>\n            <button type=\"button\" className=\"btn btn-dark mb-3\" id=\"createButton\" onClick={() => this.showInsertForm()}><i className=\"fa fa-plus\"></i></button>\n            <div style={{ position: \"absolute\", top: \"15px\", right: \"15px\", left: \"15px\", transition: \"0.2s\" }} id=\"succesAlert\">\n              <h6 className=\"alert-heading\">Opération réussie</h6>\n              <p>{this.state.message}</p>\n            </div>\n            <div className=\"row\">\n              <div id=\"tableArea\" className={this.state.colMod ? this.state.activeClass : this.state.notActiveClass} style={{ transition: \"0.2s\" }}>\n                <div className=\"input-group mb-3\">\n                  <div className=\"input-group-prepend\">\n                    <label className=\"input-group-text\" for=\"elementPageDropDown\">Elements par page</label>\n                  </div>\n                  <select model={this.state.displayNumber} class=\"custom-select\" id=\"elementPageDropDown\">\n                    <option value=\"5\">5</option>\n                    <option value=\"10\">10</option>\n                    <option value=\"15\">15</option>\n                  </select>\n                </div>\n                <div className=\"input-group mb-3\">\n                  <input id=\"searchInput\" className=\"form-control\" placeholder=\"Chercher par nom\" model={this.state.query}></input>\n                </div>\n                <table className=\"table table bordered\" id=\"myTable\">\n                  <thead className=\"thead-dark\">\n                    <tr>\n                      <th>Nom</th>\n                      <th>Cuisine</th>\n                      <th>Action</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.restaurants.map(\n                      (el, index) => {\n                        return (\n                          <tr for={(el, index) in this.state.filteredrestaurants}>\n                            <td>{el.name}</td>\n                            <td>{el.cuisine}</td>\n                            <td>\n                              <button className=\"btn btn-dark\">Edit</button>\n                              <button className=\"btn btn-dark\" onClick={(e) => this.removeRestaurant(el._id, index)}>Delete</button>\n                            </td>\n                          </tr>\n                        )\n                      }\n                    )\n                    }\n                  </tbody>\n                </table>\n                <br></br>\n                <div className=\"navigation\">\n                    <button type=\"button\" className=\"btn btn-dark\" id=\"firstButton\" onClick={this.navigate}>1</button>\n                    <button type=\"button\" className=\"btn btn-dark\" id=\"secondButton\" onClick={this.navigate}>2</button>\n                    <button type=\"button\" className=\"btn btn-dark\" id=\"thirdButton\" onClick={this.navigate}>3</button>\n                    ...................\n                    <button type=\"button\" className=\"btn btn-dark\" id=\"lastPageButton\" onClick={this.navigate}>{this.state.cRestaurants}</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {/* <button onClick={() => this.addHobby()}>Add Hobby</button>\n        <p style={{color: (this.state.hobbies.length < 5) ? 'green' : 'red'}}>\n            Nombre de Hobbies : {this.state.hobbies.length}\n        </p>\n        <ul>\n        {listAvecComponent}\n        </ul> */}\n\n        <p>Un composant User ci-dessous:</p>\n        <User name=\"Michel Buffa\" />\n        <User name=\"Gabriel Mopolo\" />\n      </body>\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}