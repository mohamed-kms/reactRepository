{"ast":null,"code":"import _defineProperty from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/src/App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport User from './components/User';\nimport Hobby from './components/Hobby';\nimport Restaurant from './components/Restaurants';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      restaurants: [],\n      userInput: '',\n      displayNumber: '5',\n      currentPage: '0',\n      query: '',\n      filteredrestaurants: [],\n      cRestaurants: null,\n      elementCount: null,\n      modifMod: false,\n      insertMod: false,\n      colMod: false,\n      showMessage: false,\n      message: '',\n      notActiveClass: 'col-lg-12',\n      activeClass: 'col-lg-8',\n      selectedForModification: null,\n      modifRestaurant: {\n        id: null,\n        nom: null,\n        cuisine: null\n      },\n      newRestaurant: {\n        nom: null,\n        cuisine: null\n      }\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"addHobby\",\n    value: function addHobby() {\n      var oldHobbies = this.state.hobbies;\n      this.setState({\n        hobbies: oldHobbies.concat(this.input.value)\n      });\n      this.input.value = \"\";\n    }\n  }, {\n    key: \"removeHobby\",\n    value: function removeHobby(hobby) {\n      /*\n      let oldHobbies = this.state.hobbies;\n      let pos = this.state.hobbies.indexOf(hobby);\n      oldHobbies.splice(pos, 1);\n      */\n      var oldHobbies = this.state.hobbies.filter(function (elem, index) {\n        return elem !== hobby ? elem : null;\n      });\n      this.setState({\n        hobbies: oldHobbies\n      });\n    }\n  }, {\n    key: \"getDataFromServer\",\n    value: function getDataFromServer(url) {\n      var _this2 = this;\n\n      console.log(\"--- GETTING DATA ---\");\n      fetch(url).then(function (response) {\n        response.json().then(function (res) {\n          console.log(res);\n\n          _this2.setState({\n            restaurants: res.data\n          });\n\n          _this2.setState({\n            filteredrestaurants: _this2.state.restaurants\n          }); // this.state.restaurants = res.data;\n          //this.state.filteredrestaurants = this.state.restaurants;\n\n\n          console.log(_this2.state.restaurants);\n        });\n      }).catch(function (err) {\n        console.log(\"erreur dans le get : \" + err);\n      });\n    }\n  }, {\n    key: \"removeRestaurant\",\n    value: function removeRestaurant(id, index) {\n      var _this3 = this;\n\n      var url = \"http://localhost:8080/api/restaurants/\" + id;\n      console.log(id);\n      console.log(url);\n      fetch(url, {\n        method: \"DELETE\"\n      }).then(function (responseJSON) {\n        console.log(\"element supprimé\");\n\n        _this3.state.restaurants.splice(index, 1);\n\n        _this3.state.filteredrestaurants.splice(index, 1);\n\n        _this3.state.message = 'Ce restaurant a été supprimé';\n        _this3.state.showMessage = true;\n        setTimeout(function () {\n          _this3.state.showMessage = false;\n        }, 3000);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"countRestaurants\",\n    value: function countRestaurants(gurl) {\n      var _this4 = this;\n\n      var url = gurl;\n      fetch(url).then(function (response) {\n        response.json().then(function (res) {\n          _this4.state.elementCount = res.data;\n          _this4.state.cRestaurants = Math.ceil(_this4.state.elementCount / _this4.state.displayNumber);\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      console.log(\"Component will mount\"); // on va chercher des donnees sur le Web avec fetch, comme\n      // on a fait avec VueJS\n\n      this.countRestaurants('http://localhost:8080/api/restaurants/count');\n      this.getDataFromServer('http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber);\n    }\n  }, {\n    key: \"showInsertForm\",\n    value: function showInsertForm() {\n      var _this5 = this;\n\n      this.state.colMod = true;\n      this.state.modifMod = false;\n      setTimeout(function () {\n        _this5.state.insertMod = true;\n      }, 300);\n    }\n  }, {\n    key: \"navigate\",\n    value: function navigate(element) {\n      var cnumber = parseInt(element.target.innerHTML) - 1;\n      this.state.currentPage = cnumber;\n      var url = 'http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber;\n\n      if (this.state.query.length > 0) {\n        url = 'http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber + '&name=' + this.state.query;\n      }\n\n      this.getDataFromServer(url);\n\n      if (element.target.id == 'thirdButton' || element.target.id == 'firstButton') {\n        if (this.state.currentPage == 0 || this.state.currentPage == Math.ceil(this.state.elementCount / this.state.displayNumber)) {\n          console.log('exit');\n          return;\n        }\n\n        console.log('changing');\n        document.querySelector('#firstButton').innerHTML = cnumber;\n        document.querySelector('#secondButton').innerHTML = cnumber + 1;\n        document.querySelector('#thirdButton').innerHTML = cnumber + 2;\n      }\n    }\n  }, {\n    key: \"confirmUpdateRestaurant\",\n    value: function confirmUpdateRestaurant(e) {\n      var _this6 = this;\n\n      e.preventDefault();\n      console.log(\"e == \", e);\n\n      if (!this.state.modifRestaurant.nom || !this.state.modifRestaurant.cuisine) {\n        return;\n      }\n\n      this.state.colMod = false;\n      this.state.modifMod = false;\n      var rest = this.state.selectedForModification;\n      this.state.selectedForModification = null;\n      var url = \"http://localhost:8080/api/restaurants/\" + this.state.modifRestaurant.id;\n      var form = new FormData(document.getElementById('formulaireModificationform'));\n      fetch(url, {\n        method: \"PUT\",\n        body: form\n      }).then(function (responseJSON) {\n        rest.name = _this6.state.modifRestaurant.nom;\n        rest.cuisine = _this6.state.modifRestaurant.cuisine;\n        _this6.state.message = 'Ce restaurant a été modifié';\n        _this6.state.showMessage = true;\n        setTimeout(function () {\n          _this6.state.showMessage = false;\n        }, 3000);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"showRestaurant\",\n    value: function showRestaurant(rest, index) {\n      var _this7 = this;\n\n      console.log(rest);\n      this.state.selectedForModification = rest;\n      console.log(this.state.selectedForModification);\n      this.state.modifRestaurant.id = rest._id;\n      console.log(this.state.modifRestaurant.id);\n      this.state.modifRestaurant.nom = rest.name;\n      this.state.modifRestaurant.cuisine = rest.cuisine;\n      console.log(this.state.modifRestaurant.cuisine);\n      this.state.colMod = true;\n      this.state.insertMod = false;\n      setTimeout(function () {\n        _this7.state.modifMod = true;\n      }, 300);\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        displayNumber: event.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this,\n          _React$createElement;\n\n      console.log(\"render\"); // let list = \n      // let listAvecComponent = \n      // \t\tthis.state.hobbies.map((el, index) => {\n      // \t\treturn <Hobby \n      // \t\t\t\t\t\t name={el}\n      // \t\t\t\t\t\t key={index} \n      //              removeHobby={this.removeHobby.bind(this)} \n      // \t\t\t\t\t\t />\n      // \t}\n\n      return React.createElement(\"body\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          position: \"relative\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"Table des restaurants\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark mb-3\",\n        id: \"createButton\",\n        onClick: function onClick() {\n          return _this8.showInsertForm();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })), \"className=\", this.state.showMessage ? \"btn btn-dark mb-3\" : \"d-none\", React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: \"15px\",\n          right: \"15px\",\n          left: \"15px\",\n          transition: \"0.2s\"\n        },\n        id: \"succesAlert\",\n        className: \"alert alert-success\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        className: \"alert-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Op\\xE9ration r\\xE9ussie\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, this.state.message)), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"tableArea\",\n        className: this.state.colMod.bind ? this.state.activeClass : this.state.notActiveClass,\n        style: {\n          transition: \"0.2s\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"input-group-text\",\n        htmlFor: \"elementPageDropDown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Elements par page\")), React.createElement(\"select\", {\n        onChange: this.handleChange.bind(this),\n        className: \"custom-select\",\n        id: \"elementPageDropDown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"5\"), React.createElement(\"option\", {\n        value: \"10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"10\"), React.createElement(\"option\", {\n        value: \"15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"15\"))), React.createElement(\"div\", {\n        className: \"input-group mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"searchInput\",\n        className: \"form-control\",\n        placeholder: \"Chercher par nom\",\n        model: this.state.query,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      })), React.createElement(\"table\", {\n        className: \"table table bordered\",\n        id: \"myTable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"thead-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"Nom\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"Cuisine\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, this.state.restaurants.map(function (el, index) {\n        return React.createElement(\"tr\", {\n          htmlFor: (el, index) in _this8.state.filteredrestaurants,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262\n          },\n          __self: this\n        }, el.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, el.cuisine), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-dark\",\n          onClick: function onClick(e) {\n            return _this8.showRestaurant(el, index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265\n          },\n          __self: this\n        }, \"Edit\", React.createElement(\"i\", {\n          className: \"fa fa-edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"btn btn-dark\",\n          onClick: function onClick(e) {\n            return _this8.removeRestaurant(el._id, index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, \"Delete\")));\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"navigation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"firstButton\",\n        onClick: this.navigate.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"secondButton\",\n        onClick: this.navigate.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"thirdButton\",\n        onClick: this.navigate.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"3\"), \"...................\", React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-dark\",\n        id: \"lastPageButton\",\n        onClick: this.navigate.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, this.state.cRestaurants))), React.createElement(\"div\", {\n        className: this.state.modifMod ? \"col-lg-4\" : \"d-none\",\n        style: {\n          transition: \"1s\"\n        },\n        id: \"formulaireModification\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"formulaireModificationForm\",\n        onSubmit: this.putRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"idInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"Id :\"), React.createElement(\"input\", (_React$createElement = {\n        className: \"form-control\",\n        id: \"idInput\",\n        type: \"text\",\n        name: \"_id\",\n        value: \"56b9f89be0adc7f00f348cf6\",\n        required: true,\n        placeholder: \"Id du restaurant \\xE0 modifier\"\n      }, _defineProperty(_React$createElement, \"value\", this.state.modifRestaurant.id), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"restaurantInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, \"Nom\"), React.createElement(\"input\", {\n        class: \"form-control\",\n        id: \"restaurantInput\",\n        type: \"text\",\n        name: \"nom\",\n        required: true,\n        placeholder: \"Michel's restaurant\",\n        model: this.state.modifRestaurant.nom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"cuisineInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"Cuisine\"), React.createElement(\"input\", {\n        className: \"form-control\",\n        id: \"cuisineInput\",\n        type: \"text\",\n        name: \"cuisine\",\n        required: true,\n        placeholder: \"Michel's cuisine\",\n        model: this.state.modifRestaurant.cuisine,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-dark\",\n        onClick: this.confirmUpdateRestaurant.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"Modifier ce restaurant\")))))))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, \"Un composant User ci-dessous:\"), React.createElement(User, {\n        name: \"Michel Buffa\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }), React.createElement(User, {\n        name: \"Gabriel Mopolo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/mohamed-kms/Documents/MBDS/Buffa/hello-world/src/App.js"],"names":["React","Component","User","Hobby","Restaurant","App","props","state","restaurants","userInput","displayNumber","currentPage","query","filteredrestaurants","cRestaurants","elementCount","modifMod","insertMod","colMod","showMessage","message","notActiveClass","activeClass","selectedForModification","modifRestaurant","id","nom","cuisine","newRestaurant","oldHobbies","hobbies","setState","concat","input","value","hobby","filter","elem","index","url","console","log","fetch","then","response","json","res","data","catch","err","method","responseJSON","splice","setTimeout","gurl","Math","ceil","countRestaurants","getDataFromServer","element","cnumber","parseInt","target","innerHTML","length","document","querySelector","e","preventDefault","rest","form","FormData","getElementById","body","name","_id","event","position","showInsertForm","top","right","left","transition","bind","handleChange","map","el","showRestaurant","removeRestaurant","navigate","putRequest","confirmUpdateRestaurant"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport User from './components/User';\nimport Hobby from './components/Hobby';\nimport Restaurant from './components/Restaurants';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      restaurants: [],\n      userInput: '',\n      displayNumber: '5',\n      currentPage: '0',\n      query: '',\n      filteredrestaurants: [],\n      cRestaurants: null,\n      elementCount: null,\n      modifMod: false,\n      insertMod: false,\n      colMod: false,\n      showMessage: false,\n      message: '',\n      notActiveClass: 'col-lg-12',\n      activeClass: 'col-lg-8',\n      selectedForModification: null,\n      modifRestaurant: {\n        id: null,\n        nom: null,\n        cuisine: null\n      },\n      newRestaurant: {\n        nom: null,\n        cuisine: null\n      }\n    }\n  }\n\n  addHobby() {\n    let oldHobbies = this.state.hobbies;\n    this.setState({\n      hobbies: oldHobbies.concat(this.input.value)\n    });\n\n    this.input.value = \"\";\n  }\n\n  removeHobby(hobby) {\n\t\t/*\n\t\tlet oldHobbies = this.state.hobbies;\n\t\tlet pos = this.state.hobbies.indexOf(hobby);\n\t\toldHobbies.splice(pos, 1);\n\t\t*/\n    const oldHobbies = this.state.hobbies.filter(\n      (elem, index) => {\n        return (elem !== hobby) ? elem : null;\n      }\n    );\n\n    this.setState({\n      hobbies: oldHobbies\n    });\n  }\n  getDataFromServer(url) {\n    console.log(\"--- GETTING DATA ---\");\n    fetch(url)\n      .then(response => {\n        response.json().then(res => {\n          console.log(res);\n          this.setState({ restaurants: res.data })\n          this.setState({ filteredrestaurants: this.state.restaurants })\n          // this.state.restaurants = res.data;\n          //this.state.filteredrestaurants = this.state.restaurants;\n\n          console.log(this.state.restaurants)\n\n        })\n      })\n      .catch(err => {\n        console.log(\"erreur dans le get : \" + err)\n      });\n  }\n\n  removeRestaurant(id, index) {\n    let url = \"http://localhost:8080/api/restaurants/\" + id;\n    console.log(id);\n    console.log(url);\n\n    fetch(url, {\n      method: \"DELETE\",\n    })\n      .then((responseJSON) => {\n        console.log(\"element supprimé\")\n        this.state.restaurants.splice(index, 1)\n        this.state.filteredrestaurants.splice(index, 1)\n        this.state.message = 'Ce restaurant a été supprimé'\n        this.state.showMessage = true\n        setTimeout(() => {\n          this.state.showMessage = false\n        }, 3000)\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  countRestaurants(gurl) {\n    let url = gurl;\n    fetch(url)\n      .then(response => {\n        response.json().then(res => {\n          this.state.elementCount = res.data;\n          this.state.cRestaurants = Math.ceil(this.state.elementCount / this.state.displayNumber);\n        })\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  componentWillMount() {\n    console.log(\"Component will mount\");\n    // on va chercher des donnees sur le Web avec fetch, comme\n    // on a fait avec VueJS\n    this.countRestaurants('http://localhost:8080/api/restaurants/count')\n    this.getDataFromServer('http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber);\n  }\n\n  showInsertForm() {\n    this.state.colMod = true;\n    this.state.modifMod = false;\n    setTimeout(() => {\n      this.state.insertMod = true;\n    }, 300)\n  }\n\n  navigate(element) {\n    let cnumber = parseInt(element.target.innerHTML) - 1;\n    this.state.currentPage = cnumber;\n    let url = 'http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber\n    if (this.state.query.length > 0) {\n      url = 'http://localhost:8080/api/restaurants?page=' + this.state.currentPage + '&pagesize=' + this.state.displayNumber + '&name=' + this.state.query\n    }\n    this.getDataFromServer(url)\n    if (element.target.id == 'thirdButton' || element.target.id == 'firstButton') {\n      if (this.state.currentPage == 0 || this.state.currentPage == Math.ceil(this.state.elementCount / this.state.displayNumber)) {\n        console.log('exit')\n        return;\n      }\n      console.log('changing')\n      document.querySelector('#firstButton').innerHTML = cnumber;\n      document.querySelector('#secondButton').innerHTML = cnumber + 1;\n      document.querySelector('#thirdButton').innerHTML = cnumber + 2;\n    }\n  }\n\n  confirmUpdateRestaurant(e) {\n    e.preventDefault();\n    console.log(\"e == \", e)\n    if (!this.state.modifRestaurant.nom || !this.state.modifRestaurant.cuisine) {\n      return;\n    }\n    this.state.colMod = false;\n    this.state.modifMod = false;\n    let rest = this.state.selectedForModification\n    this.state.selectedForModification = null\n    let url = \"http://localhost:8080/api/restaurants/\" + this.state.modifRestaurant.id;\n    let form = new FormData(document.getElementById('formulaireModificationform'));\n    fetch(url, {\n      method: \"PUT\",\n      body: form\n    })\n      .then((responseJSON) => {\n        rest.name = this.state.modifRestaurant.nom\n        rest.cuisine = this.state.modifRestaurant.cuisine\n        this.state.message = 'Ce restaurant a été modifié'\n        this.state.showMessage = true\n        setTimeout(() => {\n          this.state.showMessage = false\n        }, 3000)\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }\n\n  showRestaurant(rest, index) {\n    console.log(rest)\n    this.state.selectedForModification = rest;\n    console.log(this.state.selectedForModification)\n    this.state.modifRestaurant.id = rest._id;\n    console.log(this.state.modifRestaurant.id)\n    this.state.modifRestaurant.nom = rest.name;\n    this.state.modifRestaurant.cuisine = rest.cuisine;\n    console.log(this.state.modifRestaurant.cuisine)\n    this.state.colMod = true;\n    this.state.insertMod = false;\n    setTimeout(() => {\n      this.state.modifMod = true;\n    }, 300)\n  }\n\n  handleChange(event){\n    this.setState({ displayNumber: event.target.value });\n  }\n\n  render() {\n    console.log(\"render\");\n    // let list = \n\n    // let listAvecComponent = \n    // \t\tthis.state.hobbies.map((el, index) => {\n    // \t\treturn <Hobby \n    // \t\t\t\t\t\t name={el}\n    // \t\t\t\t\t\t key={index} \n    //              removeHobby={this.removeHobby.bind(this)} \n    // \t\t\t\t\t\t />\n    // \t}\n    return (\n      <body>\n        <div id=\"app\">\n          <div className=\"container\" style={{ position: \"relative\" }}>\n            <br></br>\n            <h2>Table des restaurants</h2>\n            <button type=\"button\" className=\"btn btn-dark mb-3\" id=\"createButton\" onClick={() => this.showInsertForm()}><i className=\"fa fa-plus\"></i></button>\n             className={this.state.showMessage ? \"btn btn-dark mb-3\" : \"d-none\"}\n            <div style={{ position: \"absolute\", top: \"15px\", right: \"15px\", left: \"15px\", transition: \"0.2s\" }} id=\"succesAlert\" className=\"alert alert-success\" role=\"alert\">\n              <h6 className=\"alert-heading\">Opération réussie</h6>\n              <p>{this.state.message}</p>\n            </div>\n            <div className=\"row\">\n              <div id=\"tableArea\" className={this.state.colMod.bind ? this.state.activeClass : this.state.notActiveClass} style={{ transition: \"0.2s\" }}>\n                <div className=\"input-group mb-3\">\n                  <div className=\"input-group-prepend\">\n                    <label className=\"input-group-text\" htmlFor=\"elementPageDropDown\">Elements par page</label>\n                  </div>\n                  <select onChange={this.handleChange.bind(this)} className=\"custom-select\" id=\"elementPageDropDown\">\n                    <option value=\"5\">5</option>\n                    <option value=\"10\">10</option>\n                    <option value=\"15\">15</option>\n                  </select>\n                </div>\n                <div className=\"input-group mb-3\">\n                  <input id=\"searchInput\" className=\"form-control\" placeholder=\"Chercher par nom\" model={this.state.query}></input>\n                </div>\n                <table className=\"table table bordered\" id=\"myTable\">\n                  <thead className=\"thead-dark\">\n                    <tr>\n                      <th>Nom</th>\n                      <th>Cuisine</th>\n                      <th>Action</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.restaurants.map(\n                      (el, index) => {\n                        return (\n                          <tr htmlFor={(el, index) in this.state.filteredrestaurants}>\n                            <td>{el.name}</td>\n                            <td>{el.cuisine}</td>\n                            <td>\n                              <button className=\"btn btn-dark\" onClick={(e) => this.showRestaurant(el, index)}>Edit<i className=\"fa fa-edit\"></i></button>\n                              <button className=\"btn btn-dark\" onClick={(e) => this.removeRestaurant(el._id, index)}>Delete</button>\n                            </td>\n                          </tr>\n                        )\n                      }\n                    )\n                    }\n                  </tbody>\n                </table>\n                <br></br>\n                <div className=\"navigation\">\n                  <button type=\"button\" className=\"btn btn-dark\" id=\"firstButton\" onClick={this.navigate.bind(this)}>1</button>\n                  <button type=\"button\" className=\"btn btn-dark\" id=\"secondButton\" onClick={this.navigate.bind(this)}>2</button>\n                  <button type=\"button\" className=\"btn btn-dark\" id=\"thirdButton\" onClick={this.navigate.bind(this)}>3</button>\n                  ...................\n                    <button type=\"button\" className=\"btn btn-dark\" id=\"lastPageButton\" onClick={this.navigate.bind(this)}>{this.state.cRestaurants}</button>\n                </div>\n              </div>\n              <div className={this.state.modifMod ? \"col-lg-4\" : \"d-none\"} style={{ transition: \"1s\" }} id=\"formulaireModification\">\n                <div className=\"card\">\n                  <div className=\"card-body\">\n                    <form id=\"formulaireModificationForm\" onSubmit={this.putRequest}>\n                      <div className=\"form-group\">\n                        <label htmlFor=\"idInput\">Id :</label>\n                        <input className=\"form-control\" id=\"idInput\" type=\"text\" name=\"_id\" value=\"56b9f89be0adc7f00f348cf6\"\n                          required placeholder=\"Id du restaurant à modifier\" value={this.state.modifRestaurant.id}></input>\n                      </div>\n                      <div className=\"form-group\">\n                        <label htmlFor=\"restaurantInput\">Nom</label>\n                        <input class=\"form-control\" id=\"restaurantInput\" type=\"text\" name=\"nom\" required\n                          placeholder=\"Michel's restaurant\" model={this.state.modifRestaurant.nom}></input>\n                      </div>\n                      <div className=\"form-group\">\n                        <label htmlFor=\"cuisineInput\">Cuisine</label>\n                        <input className=\"form-control\" id=\"cuisineInput\" type=\"text\" name=\"cuisine\" required\n                          placeholder=\"Michel's cuisine\" model={this.state.modifRestaurant.cuisine}></input>\n                      </div>\n                      <button className=\"btn btn-dark\" onClick={this.confirmUpdateRestaurant.bind(this)}>Modifier ce\n                                    restaurant</button>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {/* <button onClick={() => this.addHobby()}>Add Hobby</button>\n        <p style={{color: (this.state.hobbies.length < 5) ? 'green' : 'red'}}>\n            Nombre de Hobbies : {this.state.hobbies.length}\n        </p>\n        <ul>\n        {listAvecComponent}\n        </ul> */}\n\n        <p>Un composant User ci-dessous:</p>\n        <User name=\"Michel Buffa\" />\n        <User name=\"Gabriel Mopolo\" />\n      </body >\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}